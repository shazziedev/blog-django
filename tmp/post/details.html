{% extends 'base.html' %}
{% load static %}
{% load crispy_forms_tags %}
{% block title %} {{object.title}} | ZMB{% endblock %}

{% block meta %}
  <meta name="keywords" content={{object.title}} />
{% endblock %}


{% block body %}

<style type="text/css">
@import url('https://fonts.googleapis.com/css2?family=Roboto:wght@500&display=swap');
  #top{
    position:relative;
    background: rgb(2,0,36);
    background: linear-gradient(90deg, rgba(255,0,0,1) 0%, rgba(57,6,95,1) 24%, rgba(7,0,105,1) 50%, rgba(16,0,164,1) 55%, rgba(240,8,129,1) 63%, rgba(0,212,255,1) 100%);

    width:100%;
    height:70px;
  }
  .main-title{
    font-family: 'Roboto', sans-serif;
  }
  @media screen and (max-width: 414px){
      #top{
        height:30px;
      }
  }
</style>

<div id="top">
</div>
<div class="col-md-8 mx-auto py-5 container">
  <nav aria-label="breadcrumb p-0 m-0 ">
    <ol class="breadcrumb">
      <li class="breadcrumb-item"><a href="{% url 'home' %}" style="text-decoration:none;">Buzz</a></li>
      <li class="breadcrumb-item active" aria-current="page">{{object.title}}</li>
    </ol>
  </nav>
  <div class="row">
    <div class="col-md-8 col my-1">

        <div class="main-title h2">{{object.title}}</div>
        <div class="d-flex">
            <div  style="
                width:25px;
                height:25px;
                background-image:url('{{object.author.thumb.url}}');
                border-radius:50%;
                background-size: 150% auto ;
                background-position: top center;
            ">
            </div>

            <p class="mx-2">{{object.author.user.first_name}} {{object.author.user.last_name}}</p>
            <p class="mx-3">{{object.l_updated}}</p>
            <p class="mx-3 bg-dark text-light px-1">{{object.cat}}</p>
        </div>

            <div>{{object.intro | safe |linebreaks}}</div>
            <img src="{{object.thumb.url}}" class="img-fluid my-4">
            <div>{{object.body | safe | linebreaks}}</div>

            {% if object.m_link %}
              <h4 class="my-3">Stream: {{object.title}}</h4>
              <div class="my-4">{{object.m_link|safe}}</div>
            {% endif %}

           
            {% if object.upload %}
            <div class="my-3">
              <h4 class="my-3">Download: {{object.title}}</h4>
              <audio controls>
                <source src="{{object.upload.url}}" type="audio/ogg">
                <source src="{{object.upload.url}}" type="audio/mpeg">
              Your browser does not support the audio element.
              </audio>
              <div>
                <a class="btn btn-success my-3" href="{{object.upload.url}}" download><i class="fa fa-download"></i> Download Mp3</a>
              </div>
            </div>
            {% endif %}

            {% if object.v_link %}
              <div class="col-12">
                <h4 class="my-3">Video: {{object.title}}</h4>
                <div class="my-4">
              </div>
                {{object.v_link|safe}}
              </div>
            {% endif %}
        
            {% if object.s_link %}
              <h4 class="my-3">Socials:</h4>
              <div class="my-4" >{{object.s_link|safe}}</div>
            {% endif %}


            <div class="col-12 clearfix py-5">
              <div class="h1">Recommended Posts</div>
              
                
            {% for i in r_post %}
                {% for r in i %}
                {% if r.id == object.id %}
                {% else %}
                
                <div class="col-4 float-start my-4">
                  <div class="" style="
                     background-color: purple;
                      width:90%;
                      height:125px;
                      background-image:url('{{r.thumb.url}}');
                      background-size: 150% auto ;
                      background-position: top center;
                  ">
                  </div>
                  <div class="">{{r.title}}</div>
                </div>
                {% endif %}
                {% endfor %}
            {% endfor %}
            </div>



            <div class="border-top py-4">
              <h4>Leave a Comment</h4>
              <form class="" action="{{object.get_absolute_url}}" method="post">
                {% csrf_token %}
                {{frm|crispy}}
                <button class="btn btn-primary my-2" type="submit">Comment</button>
              </form>
            </div>

            <div >
              {% for comment in comments %}
                <div class="comment border-top py-3">
                  <p class="info">
                    <b>{{ comment.name }}</b>
                  </p>
                  <p>
                  {{ comment.body|linebreaks }}
                  </p>
                  <p>
                  {{ comment.created }}
                  </p>
                </div>
              {% empty %}
                <p>There are no comments yet.</p>
              {% endfor %}
            </div>
    </div>

    <div class="col p-3">
        <h3 class="m-2">Trending</h3>
          {% for i in new %}
          <a class="" href="{{i.get_absolute_url}}">
             <li class="card p-3 m-2">{{i.title}}</li>
          </a>
          {% endfor %}          
    </div>
  </div>
</div>


{% endblock %}